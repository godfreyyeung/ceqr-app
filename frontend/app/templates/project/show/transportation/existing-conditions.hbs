{{!-- transportation/existing-conditions controller template --}}

<div class="row">
  <div class="sixteen wide column">
    {{#mapbox-gl
      id="study-area-map"
      initOptions=(hash
        style='mapbox://styles/mapbox/light-v9'
        zoom=9.2
        center=(array -74 40.7071266)
      ) as |map|
    }}
      {{#transportation/map-handlers as |handlers|}}
        {{#mapbox/carto-vector-source map=map as |carto-layer|}}
          {{#carto-layer
            sql='select * from nyc_census_tracts_2010'
            layer=(hash
              type='fill'
              paint=(hash fill-color='green')
            ) as |layer|
          }}
            {{#layer.hovered-feature as |card|}}
              {{#labs-layers-tooltip position=card.mousePosition}}
                {{card.properties.boroname}}
              {{/labs-layers-tooltip}}
            {{/layer.hovered-feature}}
          {{/carto-layer}}

          {{carto-layer
            sql='select * from mta_subway_routes_v0'
            layer=(hash
              type='line'
              paint=(hash line-color='red')
            )
          }}

          {{carto-layer
            sql='select * from mta_bus_stops_v0'
            layer=(hash
              type='circle'
              paint=(hash circle-color='pink' circle-radius=1)
            )
          }}
        {{/mapbox/carto-vector-source}}
      {{/transportation/map-handlers}}

    {{/mapbox-gl}}
  </div>
</div>

{{outlet}}
